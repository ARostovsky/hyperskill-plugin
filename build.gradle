buildscript {
    ext.pythonPluginVersion = pythonPluginVersion
}

plugins {
    id "org.jetbrains.intellij" version "0.2.16"
    id "java"
    id("org.jetbrains.kotlin.jvm") version "1.1.4-2"
}


group = 'org.jetbrains.edu'
version = pluginVersion

sourceSets {
    main {
        java.srcDirs 'src', 'Edu-Java/src', 'Edu-Kotlin/src', 'Edu-Python/src'
        resources.srcDirs 'resources', 'Edu-Java/resources', 'Edu-Kotlin/resources', 'Edu-Python/src'
    }

    test {
        java.srcDirs 'testSrc'
    }
}

intellij {
    if (project.hasProperty("ideaVersion")) {
        version ideaVersion
    } else if (project.hasProperty("ideaPath")) {
        localPath ideaPath
    }
    patchPluginXml.sinceBuild = '172.3544'
    updateSinceUntilBuild true
    downloadSources false
    plugins 'junit', 'Kotlin', "PythonCore:$pythonPluginVersion"
}

task configurePyCharmTask {
    doLast {
        intellij.alternativeIdePath pycharmPath
    }
}

// task for running pycharm with plugins locally
task runPyCharm {
    dependsOn configurePyCharmTask
    dependsOn runIde
}

dependencies {
    compile fileTree(dir: 'lib', include: ['*.jar'])
}
